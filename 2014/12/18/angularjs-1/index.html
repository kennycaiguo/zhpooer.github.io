
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>angularjs-入门 | Poe&#39;s World</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="zhpooer">
    
    <meta name="description" content="Hello World
1
2
3
4
5
6
7
8
9
10
11
&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;body ng-app&gt;
    &lt;input type=&quot;text&quot;
           ng-model=&quot;name&quot;
    ">
    
    
    
    
    <link rel="alternative" href="/atom.xml" title="Poe&#39;s World" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="Poe&#39;s World" title="Poe&#39;s World"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Poe&#39;s World">Poe&#39;s World</a></h1>
				<h2 class="blog-motto">竹杖芒鞋轻胜马，一蓑烟雨任平生</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/english-monthly">英语角</a></li>
					
						<li><a href="/about">关于</a></li>
					
						<li><a href="/archives">归档</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:zhpooer.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/12/18/angularjs-1/" title="angularjs-入门" itemprop="url">angularjs-入门</a>
  </h1>
  <p class="article-author">By
    
      <a href="http://zhpooer.github.io" title="zhpooer">zhpooer</a>
    </p>
  <p class="article-time">
    <time datetime="2014-12-18T02:37:53.000Z" itemprop="datePublished">12月 18 2014</time>
    更新日期:<time datetime="2015-01-25T07:29:16.000Z" itemprop="dateModified">1月 25 2015</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#hello-world"><span class="toc-number">1.</span> <span class="toc-text">Hello World</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#angularjs-convenience-function"><span class="toc-number">2.</span> <span class="toc-text">AngularJS Convenience Function</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#angularjs-modules"><span class="toc-number">3.</span> <span class="toc-text">AngularJS Modules</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#controller"><span class="toc-number">4.</span> <span class="toc-text">Controller</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#more-directives"><span class="toc-number">4.1.</span> <span class="toc-text">More Directives</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ng-repeat"><span class="toc-number">4.2.</span> <span class="toc-text">ng-repeat</span></a></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#karma"><span class="toc-number">5.</span> <span class="toc-text">Karma</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#unit-test-for-controller"><span class="toc-number">5.1.</span> <span class="toc-text">Unit Test for Controller</span></a></li></ol>
		</div>
		
		<h1 id="hello-world">Hello World</h1>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
  <span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-app</span>&gt;</span>
    <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"text"</span>
           <span class="attribute">ng-model</span>=<span class="value">"name"</span>
           <span class="attribute">placeholder</span>=<span class="value">"Enter your name"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">h1</span>&gt;</span>Hello <span class="tag">&lt;<span class="title">span</span> <span class="attribute">ng-bind</span>=<span class="value">"name"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">h1</span>&gt;</span>
    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"https://ajax.googleapis.com/ajax/libs/angularjs/1.2.19/angular.js"</span>&gt;</span><span class="javascript">
    </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</pre></td></tr></table></figure>

<h1 id="angularjs-convenience-function">AngularJS Convenience Function</h1>
<ul>
<li><code>angular.forEach</code> Iterator over objects and arrays, to help you write code in a functional manner.</li>
<li><code>angular.fromJson</code> and <code>angular.toJson</code> Convenience methods to convert from a string to a JSON object and back from a
JSON object to a string.</li>
<li><code>angular.copy</code> Performs a deep copy of a given object and returns the newly created copy.</li>
<li><code>angular.equals</code> Determines if two objects, regular expressions, arrays, or values are equal. Does
deep comparison in the case of objects or arrays.</li>
<li><code>angular.isObject</code>, <code>angular.isArray</code>, and <code>angular.isFunction</code>
Convenience methods to quickly check if a given variable is an object, array, or
function.</li>
<li><code>angular.isString</code>, <code>angular.isNumber</code>, and <code>angular.isDate</code>
Convenience methods to check if a given variable is a string, number, or date object.</li>
</ul>
<h1 id="angularjs-modules">AngularJS Modules</h1>
<p>Modules are AngularJS’s way of packaging relevant code under
a single name.</p>
<p>The module can also depend on other modules as dependencies, which are defined
when the module is instantiated.</p>
<p>Module to load as the main entry point for the application by passing the module name
to the <code>ng-app</code> directive.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>// define a <span class="built_in">module</span>
angular.<span class="built_in">module</span>(<span class="string">'notesApp'</span>, [<span class="string">'notesApp.ui'</span>, <span class="string">'thirdCompany.fusioncharts'</span>]);

// get a <span class="built_in">module</span>
angular.<span class="built_in">module</span>(<span class="string">'notesApp'</span>, []);
</pre></td></tr></table></figure>

<p>This example defines a module (note the empty array as the second argument), and then
lets AngularJS bootstrap the module through the <code>ng-app</code> directive.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre><span class="comment">&lt;!-- File: chapter2/module-example.html --&gt;</span>
<span class="tag">&lt;<span class="title">html</span> <span class="attribute">ng-app</span>=<span class="value">"notesApp"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">head</span>&gt;</span><span class="tag">&lt;<span class="title">title</span>&gt;</span>Hello AngularJS<span class="tag">&lt;/<span class="title">title</span>&gt;</span><span class="tag">&lt;/<span class="title">head</span>&gt;</span>
  <span class="tag">&lt;<span class="title">body</span>&gt;</span>
    Hello 2nd time AngularJS
    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
      angular.module(<span class="string">'notesApp'</span>, []);
    </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</pre></td></tr></table></figure>

<h1 id="controller">Controller</h1>
<p>An AngularJS controller is almost always directly linked to a view or HTML.
It acts as the gateway between our model, which is the data that drives our
application, and the view, which is what the user sees and interacts with.</p>
<ul>
<li>Fetching the right data from the server for the current UI</li>
<li>Deciding which parts of that data to show to the user</li>
<li>Presentation logic, such as how to display elements, which parts of the UI to show,
how to style them, etc.</li>
<li>User interactions, such as what happens when a user clicks something or how a text
input should be validated</li>
</ul>
<p>The array holds all the dependencies for the controller as
string variables, and the last argument in the array is the actual controller function. In
this case, because we have no dependencies, the function is the only argument in the
array. </p>
<p>We also introduce a new directive, <code>ng-controller</code>. This is used to tell AngularJS to go
instantiate an instance of the controller with the given name, and attach it to the DOM
element. </p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-controller</span>=<span class="value">"MainCtrl as ctrl"</span>&gt;</span>
   AngularJS.
  <span class="tag">&lt;<span class="title">button</span> <span class="attribute">ng-click</span>=<span class="value">"ctrl.changeMessage()"</span>&gt;</span>
    Change Message
  <span class="tag">&lt;/<span class="title">button</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-repeat</span>=<span class="value">"note in ctrl.notes"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"label"</span>&gt;</span> <span class="tag">&lt;/<span class="title">span</span>&gt;</span>
    <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"status"</span> <span class="attribute">ng-bind</span>=<span class="value">"note.done"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">div</span>&gt;</span>

  <span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
    angular.module(<span class="string">'notesApp'</span>, [])
    .controller(<span class="string">'MainCtrl'</span>, [<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> self = <span class="keyword">this</span>;
      self.message= <span class="string">'Hello '</span>;
      self.changeMessage = <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
        self.message = <span class="string">'Goodbye'</span>;
      };
      self.notes = [
        {id: <span class="number">1</span>, label: <span class="string">'First Note'</span>, done: <span class="literal">false</span>},
        {id: <span class="number">2</span>, label: <span class="string">'Second Note'</span>, done: <span class="literal">false</span>},
        {id: <span class="number">3</span>, label: <span class="string">'Done Note'</span>, done: <span class="literal">true</span>},
        {id: <span class="number">4</span>, label: <span class="string">'Last Note'</span>, done: <span class="literal">false</span>}
      ];

  }]);
  </span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;/<span class="title">body</span>&gt;</span>
</pre></td></tr></table></figure>

<p>Use <code>class=&quot;ng-cloak&quot;</code> to hide <code>\{\{\}\}</code> in angularjs when bootstrap.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="attr_selector">[ng\:cloak]</span>, <span class="attr_selector">[ng-cloak]</span>, <span class="attr_selector">[data-ng-cloak]</span>, <span class="attr_selector">[x-ng-cloak]</span>,<span class="class">.ng-cloak</span>, <span class="class">.x-ng-cloak</span> <span class="rules">{
  <span class="rule"><span class="attribute">display</span>:<span class="value"> none <span class="important">!important</span></span></span>;
<span class="rule">}</span></span>
</pre></td></tr></table></figure>

<p>Each time it hits an <code>ng-controller</code> or an <code>ng-repeat</code> directive, it creates what we
call a scope in AngularJS. A scope is the context for that element. The scope dictates
what each DOM element has access to in terms of functions, variables, and the like.</p>
<p>Also note that while the <code>ng-repeat</code> instances each get their own scope, they still have
access to the parent scope.</p>
<h2 id="more-directives">More Directives</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css">
<span class="class">.done</span> <span class="rules">{ <span class="rule"><span class="attribute">background-color</span>:<span class="value"> green</span></span>;<span class="rule">}</span></span>
<span class="class">.pending</span> <span class="rules">{<span class="rule"><span class="attribute">background-color</span>:<span class="value"> red</span></span>;<span class="rule">}</span></span>
</span><span class="tag">&lt;/<span class="title">style</span>&gt;</span>

<span class="tag">&lt;<span class="title">body</span> <span class="attribute">ng-controller</span>=<span class="value">"MainCtrl as ctrl"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-repeat</span>=<span class="value">"note in ctrl.notes"</span>
       <span class="attribute">ng-class</span>=<span class="value">"ctrl.getNoteClass(note.done)"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"label"</span>&gt;</span> <span class="tag">&lt;/<span class="title">span</span>&gt;</span>
    <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"assignee"</span>
          <span class="attribute">ng-show</span>=<span class="value">"note.assignee"</span>
          <span class="attribute">ng-bind</span>=<span class="value">"note.assignee"</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">span</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;/<span class="title">body</span>&gt;</span>

<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
angular.module(<span class="string">'notesApp'</span>, []).controller(<span class="string">'MainCtrl'</span>, [
  <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> self = <span class="keyword">this</span>;
    self.notes = [
      {label: <span class="string">'First Note'</span>, done: <span class="literal">false</span>, assignee: <span class="string">'Shyam'</span>},
      {label: <span class="string">'Second Note'</span>, done: <span class="literal">false</span>},
      {label: <span class="string">'Done Note'</span>, done: <span class="literal">true</span>},
      {label: <span class="string">'Last Note'</span>, done: <span class="literal">false</span>, assignee: <span class="string">'Brad'</span>}
    ];
    self.getNoteClass = <span class="function"><span class="keyword">function</span><span class="params">(status)</span> {</span>
      <span class="keyword">return</span> {
        done: status,
        pending: !status
      };
  };
}]);

</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</pre></td></tr></table></figure>

<p>AngularJS treats true, nonempty strings, nonzero numbers,
and nonnull JS objects as truthy. </p>
<p>The <code>ng-class</code> directive can take
strings or objects as values. If it is a string,
it simply applies the CSS classes directly.
If it is an object, AngularJS takes a look at each key of the object,
and depending on whether the value for that key is true or false,
applies or removes the CSS class.</p>
<h2 id="ng-repeat">ng-repeat</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-repeat</span>=<span class="value">"(author, note) in ctrl.notes"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"label"</span>&gt;</span> <span class="tag">&lt;/<span class="title">span</span>&gt;</span>
  <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"author"</span> <span class="attribute">ng-bind</span>=<span class="value">"author"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
  angular.module(<span class="string">'notesApp'</span>, [])
    .controller(<span class="string">'MainCtrl'</span>, [<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
      <span class="keyword">var</span> self = <span class="keyword">this</span>;
      self.notes = {
      shyam: {
        id: <span class="number">1</span>,
        label: <span class="string">'First Note'</span>,
        done: <span class="literal">false</span>
      },
      Misko: {
        id: <span class="number">3</span>,
        label: <span class="string">'Finished Third Note'</span>,
        done: <span class="literal">true</span>
      },
      brad: {
        id: <span class="number">2</span>,
        label: <span class="string">'Second Note'</span>,
        done: <span class="literal">false</span>
      }
    };
  }]);
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</pre></td></tr></table></figure>

<p>Helper variables in <code>ng-repeat</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-repeat</span>=<span class="value">"note in ctrl.notes"</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span>&gt;</span>First Element: {\{$first}}<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span>&gt;</span>Middle Element: {\{$middle}}<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span>&gt;</span>Last Element: {\{$last}}<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span>&gt;</span>Index of Element: {\{$index}}<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span>&gt;</span>At Even Position: {\{$even}}<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
  <span class="tag">&lt;<span class="title">div</span>&gt;</span>At Odd Position: {\{$odd}}<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
  <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"label"</span>&gt;</span> {\{note.label}}<span class="tag">&lt;/<span class="title">span</span>&gt;</span>
  <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"status"</span> <span class="attribute">ng-bind</span>=<span class="value">"note.done"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>

<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
<span class="keyword">var</span> self = <span class="keyword">this</span>;
self.notes = [
  {id: <span class="number">1</span>, label: <span class="string">'First Note'</span>, done: <span class="literal">false</span>},
  {id: <span class="number">2</span>, label: <span class="string">'Second Note'</span>, done: <span class="literal">false</span>},
  {id: <span class="number">3</span>, label: <span class="string">'Done Note'</span>, done: <span class="literal">true</span>},
  {id: <span class="number">4</span>, label: <span class="string">'Last Note'</span>, done: <span class="literal">false</span>}
];
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</pre></td></tr></table></figure>

<p>To optimize performance, <code>ng-repeat</code> caches or reuses DOM elements if
the objects are exactly the same, according to the hash of the object</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre><span class="comment">&lt;!-- DOM Elements are reused every time someone clicks --&gt;</span>
<span class="tag">&lt;<span class="title">button</span> <span class="attribute">ng-click</span>=<span class="value">"ctrl.changeNotes()"</span>&gt;</span>Change Notes<span class="tag">&lt;/<span class="title">button</span>&gt;</span>
<span class="tag">&lt;<span class="title">div</span> <span class="attribute">ng-repeat</span>=<span class="value">"note in ctrl.notes2 track by note.id"</span>&gt;</span>
  \{\{note.$$hashKey}}
  <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"label"</span>&gt;</span> <span class="tag">&lt;/<span class="title">span</span>&gt;</span>
  <span class="tag">&lt;<span class="title">span</span> <span class="attribute">class</span>=<span class="value">"author"</span> <span class="attribute">ng-bind</span>=<span class="value">"note.done"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>

<span class="comment">&lt;!-- ng-repeat Across Multiple HTML Elements  --&gt;</span>
<span class="tag">&lt;<span class="title">table</span>&gt;</span>
  <span class="tag">&lt;<span class="title">tr</span> <span class="attribute">ng-repeat-start</span>=<span class="value">"note in ctrl.notes"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">td</span>&gt;</span><span class="tag">&lt;/<span class="title">td</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">tr</span>&gt;</span>
  <span class="tag">&lt;<span class="title">tr</span> <span class="attribute">ng-repeat-end</span>&gt;</span>
    <span class="tag">&lt;<span class="title">td</span>&gt;</span>Done: <span class="tag">&lt;/<span class="title">td</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">tr</span>&gt;</span>
<span class="tag">&lt;/<span class="title">table</span>&gt;</span>
</pre></td></tr></table></figure>

<h1 id="karma">Karma</h1>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre>sudo npm install karma<span class="attribute">-cli</span> <span class="attribute">-g</span>
npm install karma
npm install karma<span class="attribute">-jasmine</span> karma<span class="attribute">-chrome</span><span class="attribute">-launcher</span>

karma init
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
</pre></td><td class="code"><pre><span class="comment">// File: chapter3/karma.conf.js</span>
<span class="comment">// Karma configuration</span>
module.exports = <span class="function"><span class="keyword">function</span><span class="params">(config)</span> {</span>
  config.<span class="keyword">set</span>({
    <span class="comment">// base path that will be used to resolve files and exclude</span>
    basePath: <span class="string">''</span>,
    <span class="comment">// testing framework to use (jasmine/mocha/qunit/...)</span>
    frameworks: [<span class="string">'jasmine'</span>],
    
    <span class="comment">// list of files / patterns to load in the browser</span>
    files: [
      <span class="string">'angular.min.js'</span>,
      <span class="string">'angular-mocks.js'</span>,
      <span class="string">'controller.js'</span>,
      <span class="string">'simpleSpec.js'</span>,
      <span class="string">'controllerSpec.js'</span>
    ],
      
    <span class="comment">// list of files / patterns to exclude</span>
    exclude: [],
    <span class="comment">// web server port</span>
    port: <span class="number">8080</span>,
    
    <span class="comment">// level of logging</span>
    <span class="comment">// possible values: LOG_DISABLE || LOG_ERROR ||</span>
    <span class="comment">// LOG_WARN || LOG_INFO || LOG_DEBUG</span>
    logLevel: config.LOG_INFO,
    
    <span class="comment">// enable / disable watching file and executing tests</span>
    <span class="comment">// whenever any file changes</span>
    autoWatch: <span class="literal">true</span>,
    <span class="comment">// Start these browsers, currently available:</span>
    <span class="comment">// - Chrome</span>
    <span class="comment">// - ChromeCanary</span>
    <span class="comment">// - Firefox</span>
    <span class="comment">// - Opera</span>
    <span class="comment">// - Safari (only Mac)</span>
    <span class="comment">// - PhantomJS</span>
    <span class="comment">// - IE (only Windows)</span>
    browsers: [<span class="string">'Chrome'</span>],
    <span class="comment">// Continuous Integration mode</span>
    <span class="comment">// if true, it captures browsers, runs tests, and exits</span>
    singleRun: <span class="literal">false</span>
  });
};
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre>describe(<span class="string">'My Function'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
  <span class="keyword">var</span> t;
  <span class="comment">// Similar to setup</span>
  beforeEach(<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    t = <span class="literal">true</span>;
  });
  afterEach(<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    t = <span class="literal">null</span>;
  });
  it(<span class="string">'should perform action 1'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    expect(t).toBeTruthy();
  });
  it(<span class="string">'should perform action 2'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> expectedValue = <span class="literal">true</span>;
    expect(t).toEqual(expectedValue);
  });
});
</pre></td></tr></table></figure>

<ul>
<li><code>toEqual</code>, does a deep equality check between the two objects,
like array.</li>
<li><code>toBe</code>, expects both items passed to the expect
and the matcher to be the exact same object reference.</li>
<li><code>toBeTruthy</code> and <code>toBeFalsy</code></li>
<li><code>toBeDefined</code>, <code>toBeUndefined</code> and <code>toBeNull</code></li>
<li><code>toContain</code>, array passed to the expect contains the element passed to the matcher</li>
<li><code>toMatch</code>, Used for regular expression checks when the first argument to the expect is a string
that needs to match a specific regular expression pattern.</li>
</ul>
<h2 id="unit-test-for-controller">Unit Test for Controller</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre>angular.module(<span class="string">'notesApp'</span>, [])
  .controller(<span class="string">'ListCtrl'</span>, [<span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> <span class="keyword">self</span> = this;
    <span class="keyword">self</span>.items = [
      {id: <span class="number">1</span>, label: <span class="string">'First'</span>, done: <span class="keyword">true</span>},
      {id: <span class="number">2</span>, label: <span class="string">'Second'</span>, done: <span class="keyword">false</span>}
    ];
    <span class="keyword">self</span>.getDoneClass = <span class="function"><span class="keyword">function</span><span class="params">(item)</span> {</span>
    <span class="keyword">return</span> {
      finished: item.done,
      unfinished: !item.done
    };
  };
}]);
</pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="code"><pre><span class="comment">// File: chapter3/controllerSpec.js</span>
describe(<span class="string">'Controller: ListCtrl'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
  <span class="comment">// Instantiate a new version of my module before each test</span>
  beforeEach(module(<span class="string">'notesApp'</span>));
  <span class="keyword">var</span> ctrl;
  
  <span class="comment">// Before each unit test, instantiate a new instance</span>
  <span class="comment">// of the controller</span>
  beforeEach(inject(<span class="function"><span class="keyword">function</span><span class="params">(<span class="variable">$controller</span>)</span> {</span>
    ctrl = <span class="variable">$controller</span>(<span class="string">'ListCtrl'</span>);
  }));
    
  it(<span class="string">'should have items available on load'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    expect(ctrl.items).toEqual([
      {id: <span class="number">1</span>, label: <span class="string">'First'</span>, done: <span class="keyword">true</span>},
      {id: <span class="number">2</span>, label: <span class="string">'Second'</span>, done: <span class="keyword">false</span>}
    ]);
  });
  it(<span class="string">'should have highlight items based on state'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> item = {id: <span class="number">1</span>, label: <span class="string">'First'</span>, done: <span class="keyword">true</span>};
    <span class="keyword">var</span> actualClass = ctrl.getDoneClass(item);
    expect(actualClass.finished).toBeTruthy();
    expect(actualClass.unfinished).toBeFalsy();
    item.done = <span class="keyword">false</span>;
    actualClass = ctrl.getDoneClass(item);
    expect(actualClass.finished).toBeFalsy();
    expect(actualClass.unfinished).toBeTruthy();
  });
});
  
<span class="comment">// karma start my.conf.js</span>
<span class="comment">// The examples and tests in this book were run using version 0.12.16</span>
<span class="comment">// of Karma, and version 1.2.19 of AngularJS (both the angular.js and</span>
<span class="comment">// angular-mocks.js files)</span>
</pre></td></tr></table></figure>

  
	</div>
		<footer class="article-footer clearfix">




<div class="article-share" id="share">

  <div data-url="http://zhpooer.github.io/2014/12/18/angularjs-1/" data-title="angularjs-入门 | Poe&#39;s World" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2014/12/18/angularjs-2/" title="angularjs - Forms, Inputs, and Services">
  <strong>PREVIOUS:</strong><br/>
  <span>
  angularjs - Forms, Inputs, and Services</span>
</a>
</div>


<div class="next">
<a href="/2014/12/12/jquery-1/"  title="Jquery">
 <strong>NEXT:</strong><br/> 
 <span>Jquery
</span>
</a>
</div>

</nav>

	
<section class="comment">
	<div class="ds-thread"></div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#hello-world"><span class="toc-number">1.</span> <span class="toc-text">Hello World</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#angularjs-convenience-function"><span class="toc-number">2.</span> <span class="toc-text">AngularJS Convenience Function</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#angularjs-modules"><span class="toc-number">3.</span> <span class="toc-text">AngularJS Modules</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#controller"><span class="toc-number">4.</span> <span class="toc-text">Controller</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#more-directives"><span class="toc-number">4.1.</span> <span class="toc-text">More Directives</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ng-repeat"><span class="toc-number">4.2.</span> <span class="toc-text">ng-repeat</span></a></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#karma"><span class="toc-number">5.</span> <span class="toc-text">Karma</span></a></li><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#unit-test-for-controller"><span class="toc-number">5.1.</span> <span class="toc-text">Unit Test for Controller</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  

  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			<li><a href="/tags/AJAX/" title="AJAX">AJAX<sup>1</sup></a></li>
		
			<li><a href="/tags/Akka/" title="Akka">Akka<sup>1</sup></a></li>
		
			<li><a href="/tags/Android/" title="Android">Android<sup>1</sup></a></li>
		
			<li><a href="/tags/DOM/" title="DOM">DOM<sup>2</sup></a></li>
		
			<li><a href="/tags/EL表达式/" title="EL表达式">EL表达式<sup>1</sup></a></li>
		
			<li><a href="/tags/HBase/" title="HBase">HBase<sup>1</sup></a></li>
		
			<li><a href="/tags/Hadoop/" title="Hadoop">Hadoop<sup>1</sup></a></li>
		
			<li><a href="/tags/Hibernate/" title="Hibernate">Hibernate<sup>2</sup></a></li>
		
			<li><a href="/tags/HttpSession/" title="HttpSession">HttpSession<sup>1</sup></a></li>
		
			<li><a href="/tags/IO/" title="IO">IO<sup>1</sup></a></li>
		
			<li><a href="/tags/Illustrator/" title="Illustrator">Illustrator<sup>3</sup></a></li>
		
			<li><a href="/tags/JSP/" title="JSP">JSP<sup>1</sup></a></li>
		
			<li><a href="/tags/JavaBean/" title="JavaBean">JavaBean<sup>1</sup></a></li>
		
			<li><a href="/tags/JavaScript/" title="JavaScript">JavaScript<sup>1</sup></a></li>
		
			<li><a href="/tags/Mybatis/" title="Mybatis">Mybatis<sup>1</sup></a></li>
		
			<li><a href="/tags/NoSql/" title="NoSql">NoSql<sup>1</sup></a></li>
		
			<li><a href="/tags/SASS/" title="SASS">SASS<sup>1</sup></a></li>
		
			<li><a href="/tags/SAX/" title="SAX">SAX<sup>1</sup></a></li>
		
			<li><a href="/tags/ServletRequest/" title="ServletRequest">ServletRequest<sup>1</sup></a></li>
		
			<li><a href="/tags/ServletResponse/" title="ServletResponse">ServletResponse<sup>1</sup></a></li>
		
		</ul>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<div class="social-font" class="clearfix">
		
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2015 
		
		<a href="http://zhpooer.github.io" target="_blank" title="zhpooer">zhpooer</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>


<script type="text/javascript">
  var duoshuoQuery = {short_name:"zhpoooer"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 





  </body>
</html>
